setwd("~/Documents/GitHub/drug_store_sales_forecast")
store <- read.csv('csv/DA1920_store.csv')
train <- read.csv('csv/DA1920_train.csv')
test <- read.csv('csv/DA1920_test.csv')
require(naniar)
require(ggplot2)
test <- read.csv('csv/DA1920_test.csv')
library(naniar)
library(ggplot2)
store <- read.csv('csv/DA1920_store.csv')
train <- read.csv('csv/DA1920_train.csv')
test <- read.csv('csv/DA1920_test.csv')
train %>%
missing_plot()
library(mice)
train %>%
missing_plot()
install.packages(c("astsa", "bayestestR", "boot", "broom", "callr", "car", "carData", "caret", "caTools", "checkmate", "class", "cowplot", "crosstalk", "curl", "DAAG", "data.table", "dbplyr", "dendextend", "Deriv", "dplyr", "e1071", "ellipse", "emmeans", "extraDistr", "forcats", "foreach", "forecast", "fpp2", "fs", "GGally", "ggfortify", "ggpubr", "ggrepel", "glmnet", "glue", "goftest", "gower", "gplots", "greybox", "gtools", "haven", "highcharter", "Hmisc", "htmlTable", "httpuv", "httr", "igraph", "inline", "insight", "jsonlite", "KernSmooth", "lamW", "later", "lattice", "latticeExtra", "lava", "leaps", "lme4", "lmtest", "loo", "lubridate", "maptools", "MASS", "Matrix", "matrixStats", "mgcv", "mice", "ModelMetrics", "modelr", "mvtnorm", "naniar", "nlme", "nloptr", "nnet", "olsrr", "openssl", "openxlsx", "parameters", "pbkrtest", "performance", "plotly", "plotrix", "plyr", "pROC", "processx", "promises", "prophet", "pscl", "purrr", "quantmod", "quantreg", "RcppArmadillo", "RcppEigen", "RcppParallel", "recipes", "reshape2", "robustbase", "ROCR", "rstan", "rvest", "shiny", "sjlabelled", "sjmisc", "sjstats", "smooth", "sp", "SparseM", "spatial", "SQUAREM", "StanHeaders", "stringi", "survival", "sys", "systemfonts", "tidyr", "tidyselect", "TTR", "uroot", "vcd", "vctrs", "VIM", "WRS2", "xfun", "xgboost", "xml2", "xts", "zip", "zoo"))
library(naniar)
library(ggplot2)
library(mice)
store <- read.csv('csv/DA1920_store.csv')
train <- read.csv('csv/DA1920_train.csv')
test <- read.csv('csv/DA1920_test.csv')
train %>%
missing_plot()
gg_miss_var(train) + labs(y = "Look at all the missing ones")
gg_miss_var(train)
gg_miss_var(store)
gg_miss_var(store) + labs(y='Missing Data')
gg_miss_var(store)
store %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
library(gridExtra)
grid.arrange(x,y,z, nrow=3, ncol=1, top='Distribution of missing data in Promo2SinceYear, Promo2SinceWeek, and PromoInterval')
x = store %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
y = store %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceWeek_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
z = store %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
grid.arrange(x,y,z, nrow=3, ncol=1, top='Distribution of missing data in Promo2SinceYear, Promo2SinceWeek, and PromoInterval')
z = store %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
grid.arrange(x,y,z, nrow=3, ncol=1, top='Distribution of missing data in Promo2SinceYear, Promo2SinceWeek, and PromoInterval')
store_copy <- store
store_copy$group1 <- as.numeric(store_copy$PromoInterval == 'Jan,Apr,Jul,Oct')
store_copy$group2 <- as.numeric(store_copy$PromoInterval == 'Feb,May,Aug,Nov')
store_copy$group3 <- as.numeric(store_copy$PromoInterval == 'Mar,Jun,Sept,Dec')
View(store_copy)
x = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
y = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceWeek_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
z = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
grid.arrange(x,y,z, nrow=3, ncol=1, top='Distribution of missing data in Promo2SinceYear, Promo2SinceWeek, and PromoInterval')
store_copy <- subset(store_copy, select = -c(X11, X12))
View(store_copy)
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 3) +
geom_density(alpha = 0.5) +
theme_light()
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 5) +
geom_density(alpha = 0.5) +
theme_light()
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
store_copy %>%
ggplot(aes(x = Store,
fill = Promo2SinceWeek_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceWeek_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
class(store_copy$PromoInterval)
class(store_copy$Promo2SinceWeek)
store_copy$PromoInterval <- as.integer(store_copy$PromoInterval)
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
class(store_copy)
class(store_copy$PromoInterval)
store_copy$PromoInterval <- as.factor(store_copy$PromoInterval)
class(store_copy$PromoInterval)
View(store_copy)
store_copy <- store
store_copy$PromoInterval <- as.factor(store_copy$PromoInterval)
store_copy$PromoInterval.is.na()
store_copy$PromoInterval.is.na
summary(store_copy$PromoInterval)
summary(store_copy)
store_copy <- NULL
store_copy <- store
store_copy$PromoInterval <-NULL
View(store_copy)
store_copy <- store
store_copy$PromoInterval[store_copy$PromoInterval == ""] <- NA
View(store_copy)
store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
x = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
y = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceWeek_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
z = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_light()
grid.arrange(x,y,z, nrow=3, ncol=1, top='Distribution of missing data in Promo2SinceYear, Promo2SinceWeek, and PromoInterval')
x = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minima()
y = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceWeek_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minima()
z = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minima()
x = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceYear_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minimal()
y = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = Promo2SinceWeek_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minimal()
z = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = PromoInterval_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minimal()
grid.arrange(x,y,z, nrow=3, ncol=1, top='Distribution of missing data in Promo2SinceYear, Promo2SinceWeek, and PromoInterval')
Density plot of missing data for competition in store
x = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = CompetitionOpenSinceMonth_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minimal()
y = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = CompetitionOpenSinceYear_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minimal()
grid.arrange(x,y nrow=2, ncol=1, top='Distribution of missing data in CompetitionOpenSinceMonth, CompetitionOpenSinceYear)
grid.arrange(x,y, nrow=2, ncol=1, top='Distribution of missing data in CompetitionOpenSinceMonth, CompetitionOpenSinceYear)
grid.arrange(x,y, nrow=2, ncol=1, top='Distribution of missing data in CompetitionOpenSinceMonth, CompetitionOpenSinceYear')
x = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = CompetitionOpenSinceMonth_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minimal()
y = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = CompetitionOpenSinceYear_NA)) +
facet_wrap(~StoreType, ncol = 4) +
geom_density(alpha = 0.5) +
theme_minimal()
grid.arrange(x,y, nrow=2, ncol=1, top='Distribution of missing data in CompetitionOpenSinceMonth, CompetitionOpenSinceYear')
x = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = CompetitionOpenSinceMonth_NA)) +
geom_density(alpha = 0.5) +
theme_minimal()
y = store_copy %>%
bind_shadow() %>%
ggplot(aes(x = Store,
fill = CompetitionOpenSinceYear_NA)) +
geom_density(alpha = 0.5) +
theme_minimal()
grid.arrange(x,y, nrow=2, ncol=1, top='Distribution of missing data in CompetitionOpenSinceMonth, CompetitionOpenSinceYear')
